<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Обязательства по ОТ, ПБ и БДД</title>
    <!-- Подключение Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <!-- Иконки Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .main-container {
            max-width: 1140px;
        }
        .nav-tabs .nav-link {
            color: #495057;
            border-bottom-width: 2px;
        }
        .nav-tabs .nav-link.active {
            color: #0d6efd;
            border-color: #dee2e6 #dee2e6 #fff;
            border-bottom: 2px solid #0d6efd;
        }
        /* Стиль для контейнера с буквой */
        .letter-box {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: #0d6efd;
            color: white;
            font-weight: bold;
            font-size: 1.5rem;
            border-radius: 0.375rem;
            margin-right: 1rem;
            flex-shrink: 0; /* Предотвращает сжатие блока */
        }
        /* Стили для блок-схемы */
        .flowchart-container {
            text-align: center;
        }
        .flowchart-box {
            border: 2px solid #0d6efd;
            padding: 15px;
            border-radius: 10px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            width: 100%;
            margin: 0;
            font-size: 0.9rem; /* Уменьшим шрифт для длинных строк */
        }
        .flowchart-box.main-goal {
             margin: 0 auto;
             max-width: 90%;
             font-size: 1rem;
        }
         .flowchart-box.obligation-title {
            font-size: 1rem;
         }
        .vertical-connector {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 2px; /* Толщина линии */
            height: 200px; /* Увеличенная длина линии */
            background-color: #0d6efd; /* Цвет линии */
            margin-bottom: 80px; /* Отступ между линией и блоком */
        }
        .vertical-connector::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: -10px; /* Позиция наконечника */
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-top: 10px solid #0d6efd; /* Форма и цвет наконечника */
        }
        .flowchart-arrow-horizontal {
             font-size: 2.5rem;
             color: #6c757d;
        }
        .card-text {
            font-size: 0.9rem;
        }

    </style>
</head>
<body>

    <div class="container main-container mt-4 mb-5">
        <h4 id="main-title" class="text-center mb-4">Политика ПАО «ГП» в области ОТ, ПБ, пожарной безопасности и БДД</h4>
        <div id="export-buttons-container" class="text-center mb-4">
            <button id="export-btn-100" class="btn btn-secondary btn-sm"><i class="bi bi-file-earmark-pdf me-2"></i>Экспорт в PDF (100%)</button>
            <button id="export-btn-90" class="btn btn-secondary btn-sm"><i class="bi bi-file-earmark-pdf me-2"></i>Экспорт в PDF (90%)</button>
            <button id="export-btn-80" class="btn btn-secondary btn-sm"><i class="bi bi-file-earmark-pdf me-2"></i>Экспорт в PDF (80%)</button>
        </div>

        <!-- Навигационный бар с вкладками -->
        <ul class="nav nav-tabs nav-fill mb-4" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="flowchart-tab" data-bs-toggle="tab" data-bs-target="#flowchart-pane" type="button" role="tab" aria-controls="flowchart-pane" aria-selected="true"><i class="bi bi-diagram-3 me-2"></i>Блок-схема</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="cards-tab" data-bs-toggle="tab" data-bs-target="#cards-pane" type="button" role="tab" aria-controls="cards-pane" aria-selected="false"><i class="bi bi-card-text me-2"></i>Карточки</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="acronym-tab" data-bs-toggle="tab" data-bs-target="#acronym-pane" type="button" role="tab" aria-controls="acronym-pane" aria-selected="false"><i class="bi bi-spellcheck me-2"></i>Первое слово</button>
            </li>
        </ul>

        <!-- Содержимое вкладок -->
        <div class="tab-content" id="myTabContent">
            
            <!-- Вкладка 1: Блок-схема -->
            <div class="tab-pane fade show active p-4" id="flowchart-pane" role="tabpanel" aria-labelledby="flowchart-tab">
                <div class="flowchart-container">
                    <div class="flowchart-box main-goal fw-bold mb-4">Руководство ПАО «ГП» и его ДО признают приоритетным обеспечением жизни и здоровья работников, рассматривает ОТ, ПБ и пожарную безопасность, БДД, как необходимые элементы эффективного управления производственной деятельностью</div>
                    
                    <div class="row align-items-stretch">
                        <!-- Левый блок -->
                        <div class="col-md-3 d-flex">
                            <div class="m-auto" style="position: relative;">
                                <div class="vertical-connector"></div>
                                <div class="flowchart-box obligation-title main-goal fw-bold">Для достижения заявленных целей ПАО «ГП» и его ДО принимает на себя следующие обязательства:</div>
                            </div>
                        </div>
                        <!-- Правые блоки -->
                        <div class="col-md-9">
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Постоянно снижать показатели производственного травматизма, профзаболеваний, аварийности, а также минимизировать риски возникновения пожаров и ДТП.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Обеспечивать соблюдение требований нормативных актов и документов федерального, регионального и корпоративного уровня в области ПБ.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Обеспечивать эффективное функционирование и непрерывное совершенствование системы управления ПБ, в том числе развивая культуру ПБ.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Осуществлять оценку рисков в области ПБ.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Обеспечивать управление рисками для предупреждения травм, ухудшения здоровья работников, повреждения оборудования и имущества.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Обеспечивать внедрение научных разработок, технологий и методов в области ПБ.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Привлекать работников и их представителей к активному участию в деятельности по обеспечению требований ПБ и созданию безопасных условий труда.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Постоянно повышать компетентность работников в области ПБ.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Предусматривать необходимые организационные, финансовые, человеческие и материально-технические ресурсы для реализации Политики.</div></div>
                            <div class="d-flex align-items-center my-2"><i class="bi bi-arrow-right-circle flowchart-arrow-horizontal mx-2"></i><div class="flowchart-box text-start">Требовать от поставщиков и подрядчиков, действующих в интересах «ГП» и его ДО, соблюдения требований нормативных актов в области ПБ.</div></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Вкладка 2: Карточки-памятки -->
            <div class="tab-pane fade p-4" id="cards-pane" role="tabpanel" aria-labelledby="cards-tab">
                <blockquote class="blockquote text-center fst-italic border-start border-5 border-primary ps-3 my-4">
                  <p>Руководство ПАО «ГП» и его ДО признают приоритетным обеспечением жизни и здоровья работников, рассматривает ОТ, ПБ и пожарную безопасность, БДД, как необходимые элементы эффективного управления производственной деятельностью</p>
                </blockquote>
                <p class="text-center text-muted">Каждое обязательство представлено на отдельной карточке с визуальным акцентом.</p>
                <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5 g-4">
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">П</span><p class="card-text"><span class="text-primary fw-bold">Постоянно</span> снижать показатели травматизма и аварийности.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">О</span><p class="card-text"><span class="text-primary fw-bold">Обеспечивать</span> соблюдение нормативных требований в области ПБ.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">О</span><p class="card-text"><span class="text-primary fw-bold">Обеспечивать</span> функционирование и совершенствование системы управления ПБ.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">О</span><p class="card-text"><span class="text-primary fw-bold">Осуществлять</span> оценку рисков в области ПБ.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">О</span><p class="card-text"><span class="text-primary fw-bold">Обеспечивать</span> управление рисками для предупреждения травм.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">О</span><p class="card-text"><span class="text-primary fw-bold">Обеспечивать</span> внедрение научных разработок и технологий в области ПБ.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">П</span><p class="card-text"><span class="text-primary fw-bold">Привлекать</span> работников к участию в обеспечении требований ПБ.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">П</span><p class="card-text"><span class="text-primary fw-bold">Постоянно</span> повышать компетентность работников в области ПБ.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">П</span><p class="card-text"><span class="text-primary fw-bold">Предусматривать</span> необходимые ресурсы для реализации Политики.</p></div></div></div>
                    <div class="col"><div class="card h-100 shadow-sm"><div class="card-body p-3 text-center"><span class="letter-box mx-auto mb-3">Т</span><p class="card-text"><span class="text-primary fw-bold">Требовать</span> от подрядчиков соблюдения требований в области ПБ.</p></div></div></div>
                </div>
            </div>

            <!-- Вкладка 3: Метод первого слова -->
            <div class="tab-pane fade p-4 border bg-white rounded-3" id="acronym-pane" role="tabpanel" aria-labelledby="acronym-tab">
                <blockquote class="blockquote text-center fst-italic border-start border-5 border-primary ps-3 my-4">
                  <p>Руководство ПАО «ГП» и его ДО признают приоритетным обеспечением жизни и здоровья работников, рассматривает ОТ, ПБ и пожарную безопасность, БДД, как необходимые элементы эффективного управления производственной деятельностью</p>
                </blockquote>
                <p class="text-center text-muted">Акцент на первой букве и слове помогает запустить в памяти всю фразу целиком.</p>
                <ul class="list-group list-group-flush text-start fs-6 mx-auto">
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">П</span><div><span class="text-primary fw-bold">Постоянно</span> снижать показатели производственного травматизма, профзаболеваний, аварийности, а также минимизировать риски возникновения пожаров и ДТП.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">О</span><div><span class="text-primary fw-bold">Обеспечивать</span> соблюдение требований нормативных актов и документов федерального, регионального и корпоративного уровня в области ПБ.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">О</span><div><span class="text-primary fw-bold">Обеспечивать</span> эффективное функционирование и непрерывное совершенствование системы управления ПБ, в том числе развивая культуру ПБ.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">О</span><div><span class="text-primary fw-bold">Осуществлять</span> оценку рисков в области ПБ.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">О</span><div><span class="text-primary fw-bold">Обеспечивать</span> управление рисками для предупреждения травм, ухудшения здоровья работников, повреждения оборудования и имущества.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">О</span><div><span class="text-primary fw-bold">Обеспечивать</span> внедрение научных разработок, технологий и методов в области ПБ.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">П</span><div><span class="text-primary fw-bold">Привлекать</span> работников и их представителей к активному участию в деятельности по обеспечению требований ПБ и созданию безопасных условий труда.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">П</span><div><span class="text-primary fw-bold">Постоянно</span> повышать компетентность работников в области ПБ.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">П</span><div><span class="text-primary fw-bold">Предусматривать</span> необходимые организационные, финансовые, человеческие и материально-технические ресурсы для реализации Политики.</div></li>
                    <li class="list-group-item py-3 d-flex align-items-center"><span class="letter-box">Т</span><div><span class="text-primary fw-bold">Требовать</span> от поставщиков и подрядчиков, действующих в интересах «ГП» и его ДО, соблюдения требований нормативных актов в области ПБ.</div></li>
                </ul>
            </div>

        </div>
    </div>

    <!-- Подключение библиотек для экспорта и Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>

    <script>
        const exportBtn100 = document.getElementById('export-btn-100');
        const exportBtn90 = document.getElementById('export-btn-90');
        const exportBtn80 = document.getElementById('export-btn-80');
        const mainContainer = document.querySelector('.main-container');
        const navTabs = document.getElementById('myTab');
        const exportButtonsContainer = document.getElementById('export-buttons-container');

        const exportToPdf = (zoomLevel, filenameSuffix) => {
            // Скрываем ненужные элементы
            navTabs.style.display = 'none';
            exportButtonsContainer.style.display = 'none';

            // Определяем активную вкладку для выбора ориентации
            const activeTab = document.querySelector('.nav-tabs .nav-link.active');
            const isCardsTabActive = activeTab && activeTab.id === 'cards-tab';

            // Сохраняем оригинальное значение transform
            const originalTransform = mainContainer.style.transform;
            
            // Применяем масштабирование
            mainContainer.style.transformOrigin = 'top left';
            mainContainer.style.transform = `scale(${zoomLevel})`;

            const opt = {
                margin:       [0.5, 0.5, 0.5, 0.5],
                filename:     `policy-obligations-${filenameSuffix}.pdf`,
                image:        { type: 'jpeg', quality: 0.98 },
                // Компенсируем масштабирование для сохранения качества
                html2canvas:  { scale: 2 / zoomLevel, useCORS: true, logging: false },
                jsPDF:        { unit: 'in', format: 'a4', orientation: isCardsTabActive ? 'landscape' : 'portrait' }
            };

            // Запускаем экспорт и возвращаем все как было
            html2pdf().from(mainContainer).set(opt).save().then(() => {
                mainContainer.style.transform = originalTransform;
                navTabs.style.display = '';
                exportButtonsContainer.style.display = '';
            });
        };

        exportBtn100.addEventListener('click', () => {
            exportToPdf(1.0, '100-percent');
        });

        exportBtn90.addEventListener('click', () => {
            exportToPdf(0.9, '90-percent');
        });

        exportBtn80.addEventListener('click', () => {
            exportToPdf(0.8, '80-percent');
        });
    </script>
</body>
</html>

